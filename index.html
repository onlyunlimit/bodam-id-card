<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>보담고 학생증 만들기</title>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>

<body style="margin:0;background:radial-gradient(circle at top,#3b0f14,#0c0405);font-family:'Times New Roman',serif;color:#eee;">

<!-- HEADER -->

<div style="text-align:center;padding:14px 0 6px 0"><div style="font-size:18px;color:#e7d6c4;letter-spacing:2px">보담고 학생증</div><div style="font-size:11px;opacity:.7">BODAM HIGH SCHOOL</div>
</div>

<!-- CARD PREVIEW -->
<div style="display:flex;justify-content:center;padding:10px 0">
<div id="card" style="width:320px;background:linear-gradient(145deg,#f5f2ef,#ebe4dc);border-radius:20px;box-shadow:0 14px 32px rgba(0,0,0,.35),inset 0 0 12px rgba(255,255,255,.6);font-family:'Times New Roman',serif;overflow:hidden">

  <!-- CARD HEADER -->
<div style="background:linear-gradient(135deg,#3a0f14,#1e070a);padding:12px 14px;display:flex;align-items:center;gap:12px;box-shadow:inset 0 -1px 0 rgba(255,255,255,.15)">

<div style="width:80px;height:80px;border-radius:50%;background:rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center;box-shadow:inset 0 0 6px rgba(255,255,255,.25)">
<img src="https://cdn.caveduck.io/cdn-cgi/image/dpr=2,f=auto,w=800/charim/61915949-8310-4d43-b51a-eff0c013cb80?v=6ac7d3" crossOrigin="anonymous" style="width:80px;height:80px;object-fit:contain" >
</div>

<div style="color:#e7d6c4">
<div style="font-size:19px;letter-spacing:1.4px">보담고등학교</div>
<div style="font-size:13px;opacity:.85">BODAM HIGH SCHOOL</div></div></div>

  <!-- CARD BODY -->
<div style="display:flex;position:relative">
  
  <!-- LEFT VERTICAL LABEL -->
  <div style="
    width:36px;
    position:relative;
    display:flex;
    justify-content:center;
  ">
    <div style="
      position:absolute;
      top:30%;
      transform:translateY(-50%) rotate(90deg);
      transform-origin:center;
      font-size:18px;
      letter-spacing:2px;
      color:#8a6a55;
      white-space:nowrap;
      pointer-events:none;
    ">
      STUDENT IDENTITY CARD
    </div>
  </div>

<div style="padding:12px;flex:1">

<div style="width:100%;aspect-ratio:3/4;border-radius:12px;overflow:hidden;border:3px solid #3a0f14;margin-bottom:10px">
<img id="p_photo" style="width:100%;height:100%;object-fit:cover" crossOrigin="anonymous"></div>

<div style="font-size:11px;color:#7a5a46;letter-spacing:1px">NAME</div>
<div id="p_name" style="font-size:18px;font-weight:bold;color:#2a0c10;margin-bottom:6px; letter-spacing:10px">서이건</div>

<div style="font-size:11px;color:#7a5a46;letter-spacing:1px">DATE OF BIRTH</div><div id="p_birth" style="font-size:15px;color:#2a0c10;margin-bottom:6px">01 / 18</div>

<div style="font-size:11px;color:#7a5a46;letter-spacing:1px">CREATOR</div>
<div id="p_creator" style="font-size:14px;color:#2a0c10">only_unlimit</div>

</div>
</div>
</div>

</div>

<!-- FORM -->
<div style="
background:rgba(20,6,8,.9);
border-radius:20px 20px 0 0;
padding:16px;
padding-bottom:110px;
margin-top:10px">

<div id="info_block">
<label>이름</label>
<input placeholder="서이건"
oninput="p_name.innerText=this.value"
style="width:100%;margin:6px 0 12px;padding:8px;border-radius:8px;border:none">

<label>생일</label>
<input placeholder="01 / 18"
oninput="p_birth.innerText=this.value"
style="width:100%;margin:6px 0 12px;padding:8px;border-radius:8px;border:none">

<label>닉네임</label>
<input placeholder="only_unlimit"
oninput="p_creator.innerText=this.value"
style="width:100%;margin:6px 0 12px;padding:8px;border-radius:8px;border:none">
</div>

<label>학생 사진</label>
<input type="file" accept="image/*"
onchange="
const f=this.files[0];
if(!f)return;
const r=new FileReader();
r.onload=e=>p_photo.src=e.target.result;
r.readAsDataURL(f);
"
style="display:block;margin-bottom:12px">

</div>

<!-- SAVE BUTTON -->
<div style="
position:fixed;
bottom:0;
left:0;
width:100%;
background:linear-gradient(to top,rgba(12,4,5,.95),transparent);
padding:14px">
<button onclick="saveCard()"
style="
width:100%;
padding:14px;
font-size:16px;
background:#6b1b22;
color:#fff;
border:none;
border-radius:14px">
이미지로 저장
</button>
</div>

<script>
function saveCard(){

  // 숨길 텍스트들
  const hideTargets = [p_name, p_birth, p_creator];

  // 원래 display 값 저장
  const original = hideTargets.map(el => el.style.display);

  // 캡처 전 숨김
  hideTargets.forEach(el => el.style.display = "none");

  // 이미지 로딩 보장
  setTimeout(() => {
    html2canvas(card,{
      backgroundColor: null,
      scale: 1,
      useCORS: true
    }).then(canvas=>{

      // 다시 복구
      hideTargets.forEach((el,i)=>el.style.display = original[i]);

      // 저장
      const a=document.createElement("a");
      a.href=canvas.toDataURL("image/png");
      a.download="bodam_id.png";
      a.click();
    });
  }, 80); // 짧은 딜레이 중요
}
</script>
</body>
</html>
